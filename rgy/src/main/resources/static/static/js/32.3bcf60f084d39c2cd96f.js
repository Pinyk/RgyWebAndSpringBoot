webpackJsonp([32],{bs5y:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("mtWM"),n=o.n(a),s={name:"",data:function(){return{isshow:!1,formInline:{user:"",region:""},powerPlantType:"",generatorCapacity:"",voltageLevel:"",province:"",name:"",msg:8888,form:[],form2:[],username:"",realName:"",password:"",secondKey:"",phone:"",roleId:"",userId:"",count:1,list3:[],list2:[],list:[],pagesize:5,currpage:1}},methods:{show:function(){this.isshow=!this.isshow},handleCurrentChange:function(e){this.currpage=e},handleSizeChange:function(e){this.pagesize=e},handleSelectionChange:function(e){console.log(e)},activated:function(){this.$router.push(this.path)},beforeRouteLeave:function(e,t,o){this.path=this.$route.path,o()},handleClick:function(e){n.a.get("http://localhost:8084/user/delete?userId="+e.userId).then(function(e){console.log(e)}).catch(function(e){console.log(e),e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):console.log("Error",e.message),console.log(e.config)}),alert("确认删除？"),window.location.reload()},handleClick2:function(e){var t;t=e,this.username=t.username,this.realName=t.realName,this.phone=t.phone,this.roleId=t.roleId,this.userId=t.userId},reback:function(){this.list=this.list2},search:function(){var e=this,t=document.getElementById("btn0").value;n.a.get("http://localhost:8084/user/findByName?name="+t).then(function(t){e.list3=e.list,console.log(t),e.list=t.data.data.filter(function(e){return 0==e.infoState})}).catch(function(e){console.log(e),e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):console.log("Error",e.message),console.log(e.config)})},refrashData:function(){var e=document.getElementById("select"),t=e.selectedIndex;this.roleId=e.options[t].value,n.a.post("http://localhost:8084/user/update",{username:this.username,realName:this.username,phone:this.phone,roleId:this.roleId,userId:this.userId}).then(function(e){console.log(e),window.location.reload(),alert("修改成功!")}).catch(function(e){console.log(e)})}},created:function(){var e=this;n.a.get("http://localhost:8084/user/findall").then(function(t){console.log(t),e.list=t.data.data.filter(function(e){return 0==e.infoState}),e.list2=e.list}),n.a.get("http://localhost:8084/role/findall").then(function(t){console.log(t),e.form=t.data.data.filter(function(e){return 0==e.infoState});for(var o=0;o<e.form.length;o++)e.form2.push(e.form[o]);for(var a=0;a<e.form2.length;a++){var n=document.createElement("option"),s=document.getElementById("select");n.value=e.form2[a].roleId,n.innerText=e.form2[a].roleName,s.appendChild(n)}})},activated:function(){this.$router.push(this.path)},beforeRouteLeave:function(e,t,o){this.path=this.$route.path,o()}},l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.isshow,expression:"isshow"}],staticClass:"content2"},[o("div",{attrs:{id:"section_addRole_box"}},[o("div",{attrs:{id:"section_addRole_box_title"}},[o("span",[e._v("新增角色")]),e._v(" "),o("div",{attrs:{id:"section_addRole_box_CloseBtn"},on:{click:e.show}},[e._v("X")])]),e._v(" "),o("div",{attrs:{id:"section_addRole_box_content"}},[o("div",{attrs:{id:"section_addRole_box_content_RoleName"}},[o("span",[e._v("用户名：")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),e._v(" "),o("div",{attrs:{id:"section_addRole_box_content_RoleName"}},[o("span",[e._v("真实姓名：")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.realName,expression:"realName"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:e.realName},on:{input:function(t){t.target.composing||(e.realName=t.target.value)}}})]),e._v(" "),o("div",{attrs:{id:"section_addRole_box_content_RoleName"}},[o("span",[e._v("联系方式：")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{type:"text",placeholder:"请输入"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})]),e._v(" "),e._m(0),e._v(" "),o("div",{attrs:{id:"section_addRole_box_HoldBtn"}},[o("span",{on:{click:function(t){e.show(),e.refrashData()}}},[e._v("保存")])])])])]),e._v(" "),o("div",{staticClass:"mainBox"},[o("div",{staticClass:"headbox"},[o("div",{staticClass:"navbar"},[o("router-link",{attrs:{to:"/xitong/xinzeng"}},[o("div",{staticClass:"item"},[e._v("角色管理")])]),e._v(" "),o("router-link",{attrs:{to:"/xitong/user"}},[o("div",{staticClass:"item active"},[e._v("用户管理")])])],1)]),e._v(" "),o("div",{staticClass:"bottombox"},[o("div",{staticClass:"card2"},[o("div",{staticClass:"card2_top"},[o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[o("div",{staticStyle:{float:"left","margin-left":"10%","margin-top":"20px"}},[o("el-form-item",{attrs:{label:"关键字"}},[o("el-input",{attrs:{placeholder:"请输入关键字",id:"btn0"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"info"},on:{click:e.reback}},[e._v("重置")])],1)],1),e._v(" "),o("div",{staticStyle:{float:"right","margin-right":"10%","margin-top":"20px"}},[o("el-form-item",[o("el-button",{attrs:{type:"success"}},[o("router-link",{attrs:{to:"./user"}},[e._v(" +新增")])],1)],1)],1)])],1),e._v(" "),o("div",{attrs:{id:"card2_bottom"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list.slice((e.currpage-1)*e.pagesize,e.currpage*e.pagesize)},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{prop:"username",label:"用户名"}}),e._v(" "),o("el-table-column",{attrs:{prop:"realName",label:"真实姓名"}}),e._v(" "),o("el-table-column",{attrs:{prop:"phone",label:"联系方式"}}),e._v(" "),o("el-table-column",{attrs:{prop:"roleId",label:"用户角色"}}),e._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small",data:e.list.id},on:{click:function(o){return e.handleClick(t.row)}}},[e._v("删除\r\n                       ")]),e._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){e.handleClick2(t.row),e.show()}}},[e._v("修改\r\n                       ")])]}}])})],1),e._v(" "),o("el-pagination",{attrs:{background:"",layout:"prev, pager, next, sizes, total, jumper","page-sizes":[5,10,15,20],"page-size":e.pagesize,total:e.list.length},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"section_addRole_box_content_RoleName"}},[t("span",[this._v("用户角色：")]),this._v(" "),t("select",{attrs:{name:"",id:"select"}})])}]};var i=o("VU/8")(s,l,!1,function(e){o("caZl")},"data-v-0945062e",null);t.default=i.exports},caZl:function(e,t){}});
//# sourceMappingURL=32.3bcf60f084d39c2cd96f.js.map